# set $domain localhost

# http {
#   server {
#         # Hide nginx version information.
#         server_tokens off;

#         listen  80;
#         root    /usr/share/nginx/html;
#         include /etc/nginx/mime.types;

#         location / {
#             try_files $uri $uri/ /index.html;
#             proxy_pass ;
#         }

#         gzip            on;
#         gzip_vary       on;
#         gzip_http_version  1.0;
#         gzip_comp_level 5;
#         gzip_types
#                         application/atom+xml
#                         application/javascript
#                         application/json
#                         application/rss+xml
#                         application/vnd.ms-fontobject
#                         application/x-font-ttf
#                         application/x-web-app-manifest+json
#                         application/xhtml+xml
#                         application/xml
#                         font/opentype
#                         image/svg+xml
#                         image/x-icon
#                         text/css
#                         text/plain
#                         text/x-component;
#         gzip_proxied    no-cache no-store private expired auth;
#         gzip_min_length 256;
#         gunzip          on;
#     }
# }

# # server {
# #   listen 80;
# #   listen [::]:80;
# #   server_name $domain www.$domain;

# #   location ~ {
# #     allow all;
# #     root /var/www/html;
# #   }

# #   location / {
# #     rewrite ^ https://$host$request_uri? permanent;
# #   }
# # }

# # server {
# #   listen 443 ssl http2 spdy;
# #   listen [::]:443 ssl http2;
# #   server_name $domain www.$domain;

# #   server_tokens off;

# #   ssl_certificate /etc/letsencrypt/live/$domain/fullchain.pem;
# #   ssl_certificate_key /etc/letsencrypt/live/$domain/privkey.pem;

# #   ssl_buffer_size 8k;

# #   ssl_dhparam /etc/ssl/certs/dhparam-2048.pem;

# #   ssl_protocols TLSv1.2;
# #   ssl_prefer_server_ciphers on;

# #   ssl_ciphers ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5;

# #   ssl_ecdh_curve secp384r1;
# #   ssl_session_tickets off;

# #   ssl_stapling on;
# #   ssl_stapling_verify on;
# #   resolver 8.8.8.8;

# #   add_header Strict-Transport-Security "max-age=31536000;";
# #   add_header Content-Security-Policy-Report-Only "default-src https:; script-src https: 'unsafe-eval' 'unsafe-inline'; style-src https: 'unsafe-inline'; img-src https: data:; font-src https: data:; report-uri /csp-report";

# #   root /var/www/html;
# #   index index.html;
# # }

user  nginx;
worker_processes  auto;

error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    resolver        127.0.0.11 valid=10s;
    sendfile        on;

    keepalive_timeout  65;

    map $http_upgrade $connection_upgrade {
        default upgrade;
        ''      close;
    }

    include /etc/nginx/conf.d/*.conf;
}
